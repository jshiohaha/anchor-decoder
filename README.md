# anchor-decoder

A procedural macro to help with decoding Solana accounts and instructions for programs written with the [Anchor](https://github.com/coral-xyz/anchor) framework.

Note: this tool relies on IDLs generated by Anchor 0.30.0. Fortunately, there's a [CLI command](https://www.anchor-lang.com/docs/updates/release-notes/0-30-1#convert-legacy-idls) to help convert legacy IDLs to the new format.

## Usage

Add the crate to your `Cargo.toml`, and point the macro at your IDL:

```rust
use anchor_decoder::anchor_idl;

#[anchor_idl("./idl.json")]
pub const ID: Pubkey = crate::ID;
```

You can create separate crates for each program. You can also call the macro multiple times in the same files by using separate modules.

```rust
pub mod production {
    use anchor_decoder_gen::anchor_idl;
    #[anchor_idl("./production.json")]

    pub const ID: Pubkey = crate::ID;
}

pub mod staging {
    use anchor_decoder_gen::anchor_idl;
    #[anchor_idl("./staging.json")]

    pub const ID: Pubkey = crate::ID;
}
```

There are more examples in the [examples/](https://github.com/jshiohaha/anchor-decoder/tree/master/examples) directory.

## License

The project is licensed under [Apache 2.0](./LICENSE).

Unless you explicitly state otherwise, any contribution intentionally submitted for inclusion by you, as defined in the Apache-2.0 license, shall be licensed as above, without any additional terms or conditions.

## Contribution

Any contributions are welcome. If you notice there's an IDL that doesn't breaks the macro, please open an issue or submit a pull request.
